{"ast":null,"code":"import axios from \"axios\";\nimport { setUser } from \"../reducers/userReducer\";\nexport const registration = (email, password) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(\"http://localhost:5000/api/auth/registration\", {\n        email,\n        password\n      });\n      alert(response.data.message);\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  };\n};\nexport const login = (email, password) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(\"http://localhost:5000/api/auth/login\", {\n        email,\n        password\n      });\n      dispatch(setUser(response.data.user, response.data.userType));\n      localStorage.setItem('token', response.data.token);\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  };\n};\nexport const auth = () => {\n  return async dispatch => {\n    try {\n      const response = await axios.get(\"http://localhost:5000/api/auth/auth\", {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      dispatch(setUser(response.data.user, response.data.user.userType));\n      console.log(response.data.user.userType);\n      localStorage.setItem('token', response.data.token);\n    } catch (e) {\n      localStorage.removeItem('token');\n    }\n  };\n};","map":{"version":3,"sources":["F:/reactTest/app/src/actions/user.js"],"names":["axios","setUser","registration","email","password","dispatch","response","post","alert","data","message","e","login","user","userType","localStorage","setItem","token","auth","get","headers","Authorization","getItem","console","log","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,yBAAxB;AAEA,OAAO,MAAMC,YAAY,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AAC7C,SAAO,MAAMC,QAAN,IAAkB;AACrB,QAAG;AACC,YAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW,6CAAX,EAA0D;AAC7EJ,QAAAA,KAD6E;AAE7EC,QAAAA;AAF6E,OAA1D,CAAvB;AAIAI,MAAAA,KAAK,CAACF,QAAQ,CAACG,IAAT,CAAcC,OAAf,CAAL;AACH,KAND,CAME,OAAMC,CAAN,EAAQ;AACNH,MAAAA,KAAK,CAACG,CAAC,CAACL,QAAF,CAAWG,IAAX,CAAgBC,OAAjB,CAAL;AACH;AAEJ,GAXD;AAYH,CAbM;AAeP,OAAO,MAAME,KAAK,GAAG,CAACT,KAAD,EAAQC,QAAR,KAAqB;AACtC,SAAO,MAAMC,QAAN,IAAkB;AACrB,QAAG;AACC,YAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW,sCAAX,EAAmD;AACtEJ,QAAAA,KADsE;AAEtEC,QAAAA;AAFsE,OAAnD,CAAvB;AAIAC,MAAAA,QAAQ,CAACJ,OAAO,CAACK,QAAQ,CAACG,IAAT,CAAcI,IAAf,EAAqBP,QAAQ,CAACG,IAAT,CAAcK,QAAnC,CAAR,CAAR;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BV,QAAQ,CAACG,IAAT,CAAcQ,KAA5C;AACH,KAPD,CAOE,OAAMN,CAAN,EAAQ;AACNH,MAAAA,KAAK,CAACG,CAAC,CAACL,QAAF,CAAWG,IAAX,CAAgBC,OAAjB,CAAL;AACH;AACJ,GAXD;AAYH,CAbM;AAeP,OAAO,MAAMQ,IAAI,GAAG,MAAM;AACtB,SAAO,MAAMb,QAAN,IAAkB;AACrB,QAAG;AACC,YAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACmB,GAAN,CAAU,qCAAV,EACnB;AAACC,QAAAA,OAAO,EAAE;AAACC,UAAAA,aAAa,EAAG,UAASN,YAAY,CAACO,OAAb,CAAqB,OAArB,CAA8B;AAAxD;AAAV,OADmB,CAAvB;AAGAjB,MAAAA,QAAQ,CAACJ,OAAO,CAACK,QAAQ,CAACG,IAAT,CAAcI,IAAf,EAAqBP,QAAQ,CAACG,IAAT,CAAcI,IAAd,CAAmBC,QAAxC,CAAR,CAAR;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAYlB,QAAQ,CAACG,IAAT,CAAcI,IAAd,CAAmBC,QAA/B;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BV,QAAQ,CAACG,IAAT,CAAcQ,KAA5C;AACH,KAPD,CAOE,OAAMN,CAAN,EAAQ;AACNI,MAAAA,YAAY,CAACU,UAAb,CAAwB,OAAxB;AACH;AACJ,GAXD;AAYH,CAbM","sourcesContent":["import axios from \"axios\";\r\nimport { setUser } from \"../reducers/userReducer\";\r\n\r\nexport const registration = (email, password) => {\r\n    return async dispatch => {\r\n        try{\r\n            const response = await axios.post(\"http://localhost:5000/api/auth/registration\", {\r\n                email,\r\n                password\r\n            })\r\n            alert(response.data.message)\r\n        } catch(e){\r\n            alert(e.response.data.message)\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport const login = (email, password) => {\r\n    return async dispatch => {\r\n        try{\r\n            const response = await axios.post(\"http://localhost:5000/api/auth/login\", {\r\n                email,\r\n                password\r\n            })\r\n            dispatch(setUser(response.data.user, response.data.userType))\r\n            localStorage.setItem('token', response.data.token)\r\n        } catch(e){\r\n            alert(e.response.data.message)\r\n        }\r\n    }\r\n}\r\n\r\nexport const auth = () => {\r\n    return async dispatch => {\r\n        try{\r\n            const response = await axios.get(\"http://localhost:5000/api/auth/auth\", \r\n                {headers: {Authorization: `Bearer ${localStorage.getItem('token')}`}}\r\n            )\r\n            dispatch(setUser(response.data.user, response.data.user.userType))\r\n            console.log(response.data.user.userType)\r\n            localStorage.setItem('token', response.data.token)\r\n        } catch(e){\r\n            localStorage.removeItem('token')\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}