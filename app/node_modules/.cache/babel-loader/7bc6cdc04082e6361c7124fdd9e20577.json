{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FindOneOperation = void 0;\n\nconst command_1 = require(\"./command\");\n\nconst operation_1 = require(\"./operation\");\n/** @internal */\n\n\nclass FindOneOperation extends command_1.CommandOperation {\n  constructor(collection, query, options) {\n    super(collection, options);\n    this.options = options;\n    this.collection = collection;\n    this.query = query;\n  }\n\n  execute(server, session, callback) {\n    const coll = this.collection;\n    const query = this.query;\n    const options = { ...this.options,\n      ...this.bsonOptions,\n      session\n    };\n\n    try {\n      const cursor = coll.find(query, options).limit(-1).batchSize(1); // Return the item\n\n      cursor.next((err, item) => {\n        if (err != null) return callback(err);\n        callback(undefined, item || undefined);\n      });\n    } catch (e) {\n      callback(e);\n    }\n  }\n\n}\n\nexports.FindOneOperation = FindOneOperation;\noperation_1.defineAspects(FindOneOperation, [operation_1.Aspect.EXPLAINABLE, operation_1.Aspect.CURSOR_CREATING]);","map":{"version":3,"sources":["../../src/operations/find_one.ts"],"names":[],"mappings":";;;;;;;AAKA,MAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AACA,MAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;AAGA;;;AACA,MAAa,gBAAb,SAAsC,SAAA,CAAA,gBAAtC,CAAgE;AAK9D,EAAA,WAAA,CAAY,UAAZ,EAAoC,KAApC,EAAqD,OAArD,EAAyE;AACvE,UAAM,UAAN,EAAkB,OAAlB;AAEA,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,UAAL,GAAkB,UAAlB;AACA,SAAK,KAAL,GAAa,KAAb;AACD;;AAED,EAAA,OAAO,CAAC,MAAD,EAAiB,OAAjB,EAAyC,QAAzC,EAAqE;AAC1E,UAAM,IAAI,GAAG,KAAK,UAAlB;AACA,UAAM,KAAK,GAAG,KAAK,KAAnB;AACA,UAAM,OAAO,GAAG,EAAE,GAAG,KAAK,OAAV;AAAmB,SAAG,KAAK,WAA3B;AAAwC,MAAA;AAAxC,KAAhB;;AAEA,QAAI;AACF,YAAM,MAAM,GAAG,IAAI,CAAC,IAAL,CAAU,KAAV,EAAiB,OAAjB,EAA0B,KAA1B,CAAgC,CAAC,CAAjC,EAAoC,SAApC,CAA8C,CAA9C,CAAf,CADE,CAGF;;AACA,MAAA,MAAM,CAAC,IAAP,CAAY,CAAC,GAAD,EAAM,IAAN,KAAc;AACxB,YAAI,GAAG,IAAI,IAAX,EAAiB,OAAO,QAAQ,CAAC,GAAD,CAAf;AACjB,QAAA,QAAQ,CAAC,SAAD,EAAY,IAAI,IAAI,SAApB,CAAR;AACD,OAHD;AAID,KARD,CAQE,OAAO,CAAP,EAAU;AACV,MAAA,QAAQ,CAAC,CAAD,CAAR;AACD;AACF;;AA7B6D;;AAAhE,OAAA,CAAA,gBAAA,GAAA,gBAAA;AAgCA,WAAA,CAAA,aAAA,CAAc,gBAAd,EAAgC,CAAC,WAAA,CAAA,MAAA,CAAO,WAAR,EAAqB,WAAA,CAAA,MAAA,CAAO,eAA5B,CAAhC","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FindOneOperation = void 0;\nconst command_1 = require(\"./command\");\nconst operation_1 = require(\"./operation\");\n/** @internal */\nclass FindOneOperation extends command_1.CommandOperation {\n    constructor(collection, query, options) {\n        super(collection, options);\n        this.options = options;\n        this.collection = collection;\n        this.query = query;\n    }\n    execute(server, session, callback) {\n        const coll = this.collection;\n        const query = this.query;\n        const options = { ...this.options, ...this.bsonOptions, session };\n        try {\n            const cursor = coll.find(query, options).limit(-1).batchSize(1);\n            // Return the item\n            cursor.next((err, item) => {\n                if (err != null)\n                    return callback(err);\n                callback(undefined, item || undefined);\n            });\n        }\n        catch (e) {\n            callback(e);\n        }\n    }\n}\nexports.FindOneOperation = FindOneOperation;\noperation_1.defineAspects(FindOneOperation, [operation_1.Aspect.EXPLAINABLE, operation_1.Aspect.CURSOR_CREATING]);\n//# sourceMappingURL=find_one.js.map"]},"metadata":{},"sourceType":"script"}